# object initialization in cpp
there are mainly four ways to initiliza a data object

|methods|examples|call calss funtion|comments|
|---|---|---|---|
|1 默认初始化| int a| 默认构造函数||
|2 值初始化|int a=int(); vector<int> v1(10)|默认构造函数|值初始化是值使用了初始化器（即使用了圆括号或花括号）但却没有提供初始值的情况|
|3 直接初始化/拷贝初始化|int a(12); int a = 12;// string s("123456");string s=string("123456")|直接初始化调用类的构造函数（调用参数类型最佳匹配的那个），拷贝初始化调用类的拷贝构造函数||
|4 列表初始化|int a{12};string s{"123"};vector<int> vec{1,2,3};|||

#https://blog.csdn.net/qq_34352738/article/details/79274409

最近正在看《C++ Primer》第五版，已经被C++的各种初始化方式搞的头昏脑胀，所以特写此文，来总结一下C++的各种初始化的方式。

C++的初始化有很多方式：默认初始化，值初始化，直接初始化，拷贝初始化，列表初始化。这些方式之间有什么区别与联系呢？我们一一来看。

# 1.默认初始化

默认初始化是指定义变量时没有指定初值时进行的初始化操作。例如int a; Sales_data myData;等等。这些变量被定义了而不是仅仅被声明（因为没有extern关键字修饰），而且没有显式的赋予初值。特别的，如果采用动态分配内存的方式（即采用new关键字）创建的变量，不加括号时（如int *p=new int;）也是默认初始化，加了括号（如int *p=new int()）为值初始化。变量的值与变量的类型与定义的位置有关系。

（1）对于内置类型变量（如int，double，bool等），如果定义在语句块外（即｛｝外），则变量被默认初始化为0；如果定义在语句块内（即｛｝内），变量将拥有未定义的值。

（2）对于类类型的变量（如string或其他自定义类型），不管定义于何处，都会执行默认构造函数。如果该类没有默认构造函数，则会引发错误。因此，建议为每个类都定义一个默认构造函数（=default）。

# 2.值初始化

值初始化是值使用了初始化器（即使用了圆括号或花括号）但却没有提供初始值的情况。例如，int *p=new int();vector<string> vec(10);等等都是典型的值初始化方式。注意，当不采用动态分配内存的方式（即不采用new运算符）时，写成int a();是错误的值初始化方式，因为这种方式声明了一个函数而不是进行值初始化。如果一定要进行值初始化，必须结合拷贝初始化使用，即写成int a=int();值初始化和默认初始化一样，对于内置类型初始化为0，对于类类型则调用其默认构造函数，如果没有默认构造函数，则不能进行初始化。

# 3.直接初始化与拷贝初始化

直接初始化与拷贝初始化对应，其内部实现机理不同。直接初始化是指采用小括号的方式进行变量初始化（小括号里一定要有初始值，如果没提供初始值，那就是值初始化了！）。例如int a(12);Sales_data myData(para);vector<int> ivec(ivec2);string s("123456");等等。拷贝初始化是指采用等号（=）进行初始化的方式。例如int a=12;string s=string("123456");等等。拷贝初始化看起来像是给变量赋值，实际上是执行了初始化操作，与先定义再赋值本质不同。

（1）对于内置类型变量（如int，double，bool等），直接初始化与拷贝初始化差别可以忽略不计。

（2）对于类类型的变量（如string或其他自定义类型），直接初始化调用类的构造函数（调用参数类型最佳匹配的那个），拷贝初始化调用类的拷贝构造函数。

特别的，当对类类型变量进行初始化时，如果类的构造函数采用了explicit修饰而且需要隐式类型转换时，则只能通过直接初始化而不能通过拷贝初始化进行操作。

# 4.列表初始化

列表初始化是C++ 11 新引进的初始化方式，它采用一对花括号（即｛｝）进行初始化操作。能用直接初始化和拷贝初始化的地方都能用列表初始化，而且列表初始化能对容器进行方便的初始化，因此在新的C++标准中，推荐使用列表初始化的方式进行初始化。列表初始化的应用场景有：int a{12};string s{"123"};vector<int> vec{1,2,3};这里一定要注意，列表初始化使用的是花括号而不是圆括号！
